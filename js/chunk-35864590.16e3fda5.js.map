{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.date.to-string.js","webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./node_modules/core-js/internals/is-regexp.js","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./node_modules/core-js/modules/es.string.ends-with.js","webpack:///./src/views/wind-layer.vue?ed8d","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./src/views/wind-layer.vue?392b","webpack:///./src/lib/wind-layer/windy.js","webpack:///./src/lib/wind-layer/helper.js","webpack:///./node_modules/ol/layer/Image.js","webpack:///./node_modules/ol/reproj/Image.js","webpack:///./node_modules/ol/source/Image.js","webpack:///./node_modules/ol/source/ImageCanvas.js","webpack:///./src/lib/wind-layer/index.js","webpack:///src/views/wind-layer.vue","webpack:///./src/views/wind-layer.vue?db81","webpack:///./src/views/wind-layer.vue"],"names":["redefine","DatePrototype","Date","prototype","INVALID_DATE","TO_STRING","nativeDateToString","getTime","NaN","value","call","this","$","$reduce","left","sloppyArrayMethod","target","proto","forced","reduce","callbackfn","arguments","length","undefined","isObject","classof","wellKnownSymbol","MATCH","module","exports","it","isRegExp","TypeError","toLength","notARegExp","requireObjectCoercible","correctIsRegExpLogic","nativeEndsWith","endsWith","min","Math","searchString","that","String","endPosition","len","end","search","slice","METHOD_NAME","regexp","e","f","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","Windy","params","canvas","defaulColorScale","buildParams","projection","MIN_VELOCITY_INTENSITY","minVelocity","MAX_VELOCITY_INTENSITY","maxVelocity","VELOCITY_SCALE","velocityScale","pow","window","devicePixelRatio","MAX_PARTICLE_AGE","particleAge","PARTICLE_LINE_WIDTH","lineWidth","PARTICLE_MULTIPLIER","particleMultiplier","PARTICLE_REDUCTION","FRAME_RATE","frameRate","COLOR_SCALE","colorScale","FRAME_TIME","builder","grid","date","λ0","φ0","Δλ","Δφ","ni","nj","invert","NULL_WIND_VECTOR","gridData","data","setData","bilinearInterpolateVector","x","y","g00","g10","g01","g11","rx","ry","a","b","c","d","u","v","sqrt","createWindBuilder","uComp","vComp","uData","vData","header","i","interpolate","createBuilder","forEach","record","parameterCategory","parameterNumber","buildGrid","callback","lo1","max","la2","la1","dx","dy","nx","ny","refTime","setHours","getHours","forecastTime","p","isContinuous","floor","j","row","push","λ","φ","floorMod","fi","ci","fj","cj","isValue","n","isMobile","test","navigator","userAgent","distort","scale","wind","windy","distortion","τ","PI","H","hλ","hφ","pλ","project","pφ","k","cos","createField","columns","bounds","field","column","round","release","randomize","o","safetyNet","random","width","height","buildBounds","upperLeft","lowerRight","yMax","ceil","xMax","deg2rad","deg","rad2deg","ang","mapLonDelta","east","west","mapLatDelta","south","north","lat","lon","worldMapRadius","mapOffsetY","log","sin","equatorY","atan","exp","animationLoop","mercY","tan","ymin","ymax","xFactor","yFactor","interpolateField","extent","mapArea","interpolateColumn","coord","isFinite","batchInterpolate","start","now","setTimeout","animate","windIntensityColorScale","indexFor","m","colorStyles","buckets","map","particleCount","fadeFillStyle","particles","age","evolve","bucket","particle","xt","yt","g","getContext","draw","prev","globalCompositeOperation","fillRect","globalAlpha","beginPath","strokeStyle","moveTo","lineTo","stroke","fillStyle","then","frame","requestAnimationFrame","delta","onDraw","updateData","mapBounds","stop","cancelAnimationFrame","shift","w","h","ctx","clamp","high","imageData","getImageData","clearRect","putImageData","pLength","updateParams","getParams","update","interpolatePoint","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","id","clearTimeout","createCanvas","Canvas","document","createElement","getDirection","uMs","vMs","angleConvention","abs","velocityAbs","velocityDir","atan2","velocityDirToDegrees","meterSec2kilometerHour","meters","meterSec2Knots","getSpeed","unit","Layer","ImageLayer","opt_options","options","type","LayerType","IMAGE","__proto__","Object","create","constructor","getSource","Image","ImageBase","ReprojImage","sourceProj","targetProj","targetExtent","targetResolution","pixelRatio","getImageFunction","maxSourceExtent","getExtent","maxTargetExtent","limitedTargetExtent","targetCenter","sourceResolution","errorThresholdInPixels","triangulation","Triangulation","sourceExtent","calculateSourceExtent","sourceImage","state","ImageState","LOADED","IDLE","sourcePixelRatio","getPixelRatio","targetProj_","maxSourceExtent_","triangulation_","targetResolution_","targetExtent_","sourceImage_","sourcePixelRatio_","canvas_","sourceListenerKey_","disposeInternal","LOADING","unlistenSource_","getImage","getProjection","reproject_","sourceState","getState","getResolution","image","changed","load","ERROR","EventType","CHANGE","ImageSourceEventType","IMAGELOADSTART","IMAGELOADEND","IMAGELOADERROR","ImageSourceEvent","Event","Source","ImageSource","attributions","resolutions_","resolutions","reprojectedImage_","reprojectedRevision_","getResolutions","findNearestResolution","resolution","idx","sourceProjection","getRevision","dispose","getImageInternal","bind","handleImageChange","event","loading","dispatchEvent","ImageCanvasSource","canvasFunction_","canvasFunction","renderedRevision_","ratio_","ratio","size","canvasElement","ImageCanvas","OlWind","_canvas","$Windy","isClear","setSource","logo","hasOwnProperty","on","redraw","_map","getMap","render","renderSync","_cloneLayer","addLayer","_getExtent","getData","console","warn","_getProjectionCode","_extent","_getMapExtent","setExtent","get","_getMapSize","_projection","transformExtent","_view","getView","calculateExtent","getSize","Map","Error","set","coordinates","gridValue","isNaN","direction","speed","speedUnit","removeLayer","un","code","getCode","assign","name","components","mounted","mapInit","methods","title","source","XYZ","url","layers","view","View","center","zoom","evt","fetch","response","json","windLayerInit","layerName","appendTo","component"],"mappings":"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","file":"js/chunk-35864590.16e3fda5.js","sourcesContent":["var redefine = require('../internals/redefine');\n\nvar DatePrototype = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar nativeDateToString = DatePrototype[TO_STRING];\nvar getTime = DatePrototype.getTime;\n\n// `Date.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-date.prototype.tostring\nif (new Date(NaN) + '' != INVALID_DATE) {\n  redefine(DatePrototype, TO_STRING, function toString() {\n    var value = getTime.call(this);\n    // eslint-disable-next-line no-self-compare\n    return value === value ? nativeDateToString.call(this) : INVALID_DATE;\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: sloppyArrayMethod('reduce') }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\nvar nativeEndsWith = ''.endsWith;\nvar min = Math.min;\n\n// `String.prototype.endsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.endswith\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('endsWith') }, {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = toLength(that.length);\n    var end = endPosition === undefined ? len : min(toLength(endPosition), len);\n    var search = String(searchString);\n    return nativeEndsWith\n      ? nativeEndsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wind-layer.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wind-layer.vue?vue&type=style&index=0&lang=css&\"","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (e) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (f) { /* empty */ }\n  } return false;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"olmap\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\r\n\r\n/*  Global class for simulating the movement of particle through a 1km wind grid\r\n credit: All the credit for this work goes to: https://github.com/cambecc for creating the repo:\r\n https://github.com/cambecc/earth. The majority of this code is directly take nfrom there, since its awesome.\r\n This class takes a canvas element and an array of data (1km GFS from http://www.emc.ncep.noaa.gov/index.php?branch=GFS)\r\n and then uses a mercator (forward/reverse) projection to correctly map wind vectors in \"map space\".\r\n The \"start\" method takes the bounds of the map at its current extent and starts the whole gridding,\r\n interpolation and animation process.\r\n */\r\n\r\nconst Windy = function (params = {}) {\r\n  this.params = params;\r\n  const that = this;\r\n\r\n  that.canvas = params.canvas;\r\n\r\n  var defaulColorScale = [\r\n    \"rgb(36,104, 180)\",\r\n    \"rgb(60,157, 194)\",\r\n    \"rgb(128,205,193 )\",\r\n    \"rgb(151,218,168 )\",\r\n    \"rgb(198,231,181)\",\r\n    \"rgb(238,247,217)\",\r\n    \"rgb(255,238,159)\",\r\n    \"rgb(252,217,125)\",\r\n    \"rgb(255,182,100)\",\r\n    \"rgb(252,150,75)\",\r\n    \"rgb(250,112,52)\",\r\n    \"rgb(245,64,32)\",\r\n    \"rgb(237,45,28)\",\r\n    \"rgb(220,24,32)\",\r\n    \"rgb(180,0,35)\"\r\n  ];\r\n\r\n  var buildParams = function (params) {\r\n    if (!params.projection) params.projection = 'EPSG:4326';\r\n    that.MIN_VELOCITY_INTENSITY = params.minVelocity || 0;                      // velocity at which particle intensity is minimum (m/s)\r\n    that.MAX_VELOCITY_INTENSITY = params.maxVelocity || 10;                     // velocity at which particle intensity is maximum (m/s)\r\n    that.VELOCITY_SCALE = (params.velocityScale || 0.005) * (Math.pow(window.devicePixelRatio, 1 / 3) || 1); // scale for wind velocity (completely arbitrary--this value looks nice)\r\n    that.MAX_PARTICLE_AGE = params.particleAge || 90;                         \t // max number of frames a particle is drawn before regeneration\r\n    that.PARTICLE_LINE_WIDTH = params.lineWidth || 1;                           // line width of a drawn particle\r\n    that.PARTICLE_MULTIPLIER = params.particleMultiplier || 1 / 300;            // particle count scalar (completely arbitrary--this values looks nice)\r\n    that.PARTICLE_REDUCTION = (Math.pow(window.devicePixelRatio, 1 / 3) || 1.6);   // multiply particle count for mobiles by this amount\r\n    that.FRAME_RATE = params.frameRate || 16;\r\n    that.COLOR_SCALE = params.colorScale || defaulColorScale;\r\n  };\r\n\r\n  buildParams(params);\r\n\r\n  window.FRAME_TIME = 1000 / that.FRAME_RATE;   // desired frames per second\r\n\r\n  var NULL_WIND_VECTOR = [NaN, NaN, null];  // singleton for no wind in the form: [u, v, magnitude]\r\n\r\n  var builder;\r\n  var grid;\r\n  var gridData = that.params.data;\r\n  var date;\r\n  var λ0, φ0, Δλ, Δφ, ni, nj;\r\n\r\n  var setData = function (data) {\r\n    gridData = data;\r\n  };\r\n\r\n  // interpolation for vectors like wind (u,v,m)\r\n  var bilinearInterpolateVector = function (x, y, g00, g10, g01, g11) {\r\n    var rx = (1 - x);\r\n    var ry = (1 - y);\r\n    var a = rx * ry, b = x * ry, c = rx * y, d = x * y;\r\n    var u = g00[0] * a + g10[0] * b + g01[0] * c + g11[0] * d;\r\n    var v = g00[1] * a + g10[1] * b + g01[1] * c + g11[1] * d;\r\n    return [u, v, Math.sqrt(u * u + v * v)];\r\n  };\r\n\r\n\r\n  var createWindBuilder = function (uComp, vComp) {\r\n    var uData = uComp.data, vData = vComp.data;\r\n    return {\r\n      header: uComp.header,\r\n      //recipe: recipeFor(\"wind-\" + uComp.header.surface1Value),\r\n      data: function (i) {\r\n        return [uData[i], vData[i]];\r\n      },\r\n      interpolate: bilinearInterpolateVector\r\n    }\r\n  };\r\n\r\n  var createBuilder = function (data) {\r\n    var uComp = null, vComp = null, scalar = null;\r\n\r\n    data.forEach(function (record) {\r\n      switch (record.header.parameterCategory + \",\" + record.header.parameterNumber) {\r\n        case \"1,2\":\r\n        case \"2,2\":\r\n          uComp = record;\r\n          break;\r\n        case \"1,3\":\r\n        case \"2,3\":\r\n          vComp = record;\r\n          break;\r\n        default:\r\n          scalar = record;\r\n      }\r\n    });\r\n\r\n    return createWindBuilder(uComp, vComp);\r\n  };\r\n\r\n  var buildGrid = function (data, callback) {\r\n\r\n    builder = createBuilder(data);\r\n    var header = builder.header;\r\n\r\n    λ0 = header.lo1;\r\n    φ0 = Math.max(header.la2, header.la1);  // the grid's origin (e.g., 0.0E, 90.0N)\r\n\r\n    Δλ = header.dx;\r\n    Δφ = header.dy;    // distance between grid points (e.g., 2.5 deg lon, 2.5 deg lat)\r\n\r\n    ni = header.nx;\r\n    nj = header.ny;    // number of grid points W-E and N-S (e.g., 144 x 73)\r\n\r\n    date = new Date(header.refTime);\r\n    date.setHours(date.getHours() + header.forecastTime);\r\n\r\n    // Scan mode 0 assumed. Longitude increases from λ0, and latitude decreases from φ0.\r\n    // http://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_table3-4.shtml\r\n    grid = [];\r\n    var p = 0;\r\n    var isContinuous = Math.floor(ni * Δλ) >= 360;\r\n\r\n    for (var j = 0; j < nj; j++) {\r\n      var row = [];\r\n      for (var i = 0; i < ni; i++ , p++) {\r\n        row[i] = builder.data(p);\r\n      }\r\n      if (isContinuous) {\r\n        // For wrapped grids, duplicate first column as last column to simplify interpolation logic\r\n        row.push(row[0]);\r\n      }\r\n      grid[j] = row;\r\n    }\r\n\r\n    callback({\r\n      date: date,\r\n      interpolate: interpolate\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Get interpolated grid value from Lon/Lat position\r\n   * @param λ {Float} Longitude\r\n   * @param φ {Float} Latitude\r\n   * @returns {Object}\r\n   */\r\n  var interpolate = function (λ, φ) {\r\n\r\n    if (!grid) return null;\r\n\r\n    var i = floorMod(λ - λ0, 360) / Δλ;  // calculate longitude index in wrapped range [0, 360)\r\n    var j = (φ0 - φ) / Δφ;                 // calculate latitude index in direction +90 to -90\r\n\r\n    var fi = Math.floor(i), ci = fi + 1;\r\n    var fj = Math.floor(j), cj = fj + 1;\r\n\r\n    var row;\r\n    if ((row = grid[fj])) {\r\n      var g00 = row[fi];\r\n      var g10 = row[ci];\r\n      if (isValue(g00) && isValue(g10) && (row = grid[cj])) {\r\n        var g01 = row[fi];\r\n        var g11 = row[ci];\r\n        if (isValue(g01) && isValue(g11)) {\r\n          // All four points found, so interpolate the value.\r\n          return builder.interpolate(i - fi, j - fj, g00, g10, g01, g11);\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  /**\r\n   * @returns {Boolean} true if the specified value is not null and not undefined.\r\n   */\r\n  var isValue = function (x) {\r\n    return x !== null && x !== undefined;\r\n  };\r\n\r\n  /**\r\n   * @returns {Number} returns remainder of floored division, i.e., floor(a / n). Useful for consistent modulo\r\n   *          of negative numbers. See http://en.wikipedia.org/wiki/Modulo_operation.\r\n   */\r\n  var floorMod = function (a, n) {\r\n    return a - n * Math.floor(a / n);\r\n  };\r\n\r\n  /**\r\n   * @returns {Number} the value x clamped to the range [low, high].\r\n   */\r\n  var clamp = function (x, range) {\r\n    return Math.max(range[0], Math.min(x, range[1]));\r\n  };\r\n\r\n  /**\r\n   * @returns {Boolean} true if agent is probably a mobile device. Don't really care if this is accurate.\r\n   */\r\n  var isMobile = function () {\r\n    return (/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i).test(navigator.userAgent);\r\n  };\r\n\r\n  /**\r\n   * Calculate distortion of the wind vector caused by the shape of the projection at point (x, y). The wind\r\n   * vector is modified in place and returned by this function.\r\n   */\r\n  var distort = function (projection, λ, φ, x, y, scale, wind, windy) {\r\n    var u = wind[0] * scale;\r\n    var v = wind[1] * scale;\r\n    var d = distortion(projection, λ, φ, x, y, windy);\r\n\r\n    // Scale distortion vectors by u and v, then add.\r\n    wind[0] = d[0] * u + d[2] * v;\r\n    wind[1] = d[1] * u + d[3] * v;\r\n    return wind;\r\n  };\r\n\r\n  var distortion = function (projection, λ, φ, x, y, windy) {\r\n    var τ = 2 * Math.PI;\r\n    // var H = Math.pow(10, -5.2);\r\n    var H = that.params.projection === 'EPSG:4326' ? 5 : Math.pow(10, -5.2);\r\n    var hλ = λ < 0 ? H : -H;\r\n    var hφ = φ < 0 ? H : -H;\r\n\r\n    var pλ = project(φ, λ + hλ, windy);\r\n    var pφ = project(φ + hφ, λ, windy);\r\n\r\n    // Meridian scale factor (see Snyder, equation 4-3), where R = 1. This handles issue where length of 1º λ\r\n    // changes depending on φ. Without this, there is a pinching effect at the poles.\r\n    var k = Math.cos(φ / 360 * τ);\r\n    return [\r\n      (pλ[0] - x) / hλ / k,\r\n      (pλ[1] - y) / hλ / k,\r\n      (pφ[0] - x) / hφ,\r\n      (pφ[1] - y) / hφ\r\n    ];\r\n  };\r\n\r\n  var createField = function (columns, bounds, callback) {\r\n\r\n    /**\r\n     * @returns {Array} wind vector [u, v, magnitude] at the point (x, y), or [NaN, NaN, null] if wind\r\n     *          is undefined at that point.\r\n     */\r\n    function field(x, y) {\r\n      var column = columns[Math.round(x)];\r\n      return column && column[Math.round(y)] || NULL_WIND_VECTOR;\r\n    }\r\n\r\n    // Frees the massive \"columns\" array for GC. Without this, the array is leaked (in Chrome) each time a new\r\n    // field is interpolated because the field closure's context is leaked, for reasons that defy explanation.\r\n    field.release = function () {\r\n      columns = [];\r\n    };\r\n\r\n    field.randomize = function (o) {  // UNDONE: this method is terrible\r\n      var x, y;\r\n      var safetyNet = 0;\r\n      do {\r\n        x = Math.round(Math.floor(Math.random() * bounds.width) + bounds.x);\r\n        y = Math.round(Math.floor(Math.random() * bounds.height) + bounds.y)\r\n      } while (field(x, y)[2] === null && safetyNet++ < 30);\r\n      o.x = x;\r\n      o.y = y;\r\n      return o;\r\n    };\r\n\r\n    callback(bounds, field);\r\n  };\r\n\r\n  var buildBounds = function (bounds, width, height) {\r\n    var upperLeft = bounds[0];\r\n    var lowerRight = bounds[1];\r\n    var x = Math.round(upperLeft[0]); //Math.max(Math.floor(upperLeft[0], 0), 0);\r\n    var y = Math.max(Math.floor(upperLeft[1], 0), 0);\r\n    var xMax = Math.min(Math.ceil(lowerRight[0], width), width - 1);\r\n    var yMax = Math.min(Math.ceil(lowerRight[1], height), height - 1);\r\n    return { x: x, y: y, xMax: width, yMax: yMax, width: width, height: height };\r\n  };\r\n\r\n  var deg2rad = function (deg) {\r\n    return (deg / 180) * Math.PI;\r\n  };\r\n\r\n  var rad2deg = function (ang) {\r\n    return ang / (Math.PI / 180.0);\r\n  };\r\n\r\n  var invert\r\n\r\n  if (that.params.projection === 'EPSG:4326') {\r\n    invert = function (x, y, windy) {\r\n      var mapLonDelta = windy.east - windy.west;\r\n      var mapLatDelta = windy.south - windy.north;\r\n      var lat = rad2deg(windy.north) + y / windy.height * rad2deg(mapLatDelta);\r\n      var lon = rad2deg(windy.west) + x / windy.width * rad2deg(mapLonDelta);\r\n      return [lon, lat];\r\n    };\r\n  } else {\r\n    invert = function (x, y, windy) {\r\n      var mapLonDelta = windy.east - windy.west;\r\n      var worldMapRadius = windy.width / rad2deg(mapLonDelta) * 360 / (2 * Math.PI);\r\n      var mapOffsetY = (worldMapRadius / 2 * Math.log((1 + Math.sin(windy.south)) / (1 - Math.sin(windy.south))));\r\n      var equatorY = windy.height + mapOffsetY;\r\n      var a = (equatorY - y) / worldMapRadius;\r\n      var lat = 180 / Math.PI * (2 * Math.atan(Math.exp(a)) - Math.PI / 2);\r\n      var lon = rad2deg(windy.west) + x / windy.width * rad2deg(mapLonDelta);\r\n      return [lon, lat];\r\n    };\r\n  }\r\n\r\n  var mercY = function (lat) {\r\n    return Math.log(Math.tan(lat / 2 + Math.PI / 4));\r\n  };\r\n\r\n\r\n  var project = function (lat, lon, windy) { // both in radians, use deg2rad if neccessary\r\n    var ymin = mercY(windy.south);\r\n    var ymax = mercY(windy.north);\r\n    var xFactor = windy.width / (windy.east - windy.west);\r\n    var yFactor = windy.height / (ymax - ymin);\r\n\r\n    var y = mercY(deg2rad(lat));\r\n    var x = (deg2rad(lon) - windy.west) * xFactor;\r\n    var y = (ymax - y) * yFactor; // y points south\r\n    return [x, y];\r\n  };\r\n\r\n  var interpolateField = function (grid, bounds, extent, callback) {\r\n\r\n    var projection = {};\r\n    var mapArea = ((extent.south - extent.north) * (extent.west - extent.east));\r\n    var velocityScale = that.VELOCITY_SCALE * Math.pow(mapArea, 0.4);\r\n\r\n    var columns = [];\r\n    var x = bounds.x;\r\n\r\n    function interpolateColumn(x) {\r\n      var column = [];\r\n      for (var y = bounds.y; y <= bounds.yMax; y += 2) {\r\n        var coord = invert(x, y, extent);\r\n        if (coord) {\r\n          var λ = coord[0], φ = coord[1];\r\n          if (isFinite(λ)) {\r\n            var wind = grid.interpolate(λ, φ);\r\n            if (wind) {\r\n              wind = distort(projection, λ, φ, x, y, velocityScale, wind, extent);\r\n              column[y + 1] = column[y] = wind;\r\n\r\n            }\r\n          }\r\n        }\r\n      }\r\n      columns[x + 1] = columns[x] = column;\r\n    }\r\n\r\n    (function batchInterpolate() {\r\n      var start = Date.now();\r\n      while (x < bounds.width) {\r\n        interpolateColumn(x);\r\n        x += 2;\r\n        if ((Date.now() - start) > 1000) { //MAX_TASK_TIME) {\r\n          setTimeout(batchInterpolate, 25);\r\n          return;\r\n        }\r\n      }\r\n      createField(columns, bounds, callback);\r\n    })();\r\n  };\r\n\r\n  var animationLoop;\r\n  var animate = function (bounds, field) {\r\n\r\n    function windIntensityColorScale(min, max) {\r\n\r\n      that.COLOR_SCALE.indexFor = function (m) {  // map velocity speed to a style\r\n        return Math.max(0, Math.min((that.COLOR_SCALE.length - 1),\r\n          Math.round((m - min) / (max - min) * (that.COLOR_SCALE.length - 1))));\r\n\r\n      };\r\n\r\n      return that.COLOR_SCALE;\r\n    }\r\n\r\n    var colorStyles = windIntensityColorScale(that.MIN_VELOCITY_INTENSITY, that.MAX_VELOCITY_INTENSITY);\r\n    var buckets = colorStyles.map(function () {\r\n      return [];\r\n    });\r\n\r\n    var particleCount = Math.round(bounds.width * bounds.height * that.PARTICLE_MULTIPLIER);\r\n    if (isMobile()) {\r\n      particleCount *= that.PARTICLE_REDUCTION;\r\n    }\r\n\r\n    var fadeFillStyle = \"rgba(0, 0, 0, 0.97)\";\r\n\r\n    var particles = [];\r\n    for (var i = 0; i < particleCount; i++) {\r\n      particles.push(field.randomize({ age: Math.floor(Math.random() * that.MAX_PARTICLE_AGE) + 0 }));\r\n    }\r\n\r\n    function evolve() {\r\n      buckets.forEach(function (bucket) {\r\n        bucket.length = 0;\r\n      });\r\n      particles.forEach(function (particle) {\r\n        if (particle.age > that.MAX_PARTICLE_AGE) {\r\n          field.randomize(particle).age = 0;\r\n        }\r\n        var x = particle.x;\r\n        var y = particle.y;\r\n        var v = field(x, y);  // vector at current position\r\n        var m = v[2];\r\n        if (m === null) {\r\n          particle.age = that.MAX_PARTICLE_AGE;  // particle has escaped the grid, never to return...\r\n        }\r\n        else {\r\n          var xt = x + v[0];\r\n          var yt = y + v[1];\r\n          if (field(xt, yt)[2] !== null) {\r\n            // Path from (x,y) to (xt,yt) is visible, so add this particle to the appropriate draw bucket.\r\n            particle.xt = xt;\r\n            particle.yt = yt;\r\n            buckets[colorStyles.indexFor(m)].push(particle);\r\n          }\r\n          else {\r\n            // Particle isn't visible, but it still moves through the field.\r\n            particle.x = xt;\r\n            particle.y = yt;\r\n          }\r\n        }\r\n        particle.age += 1;\r\n      });\r\n    }\r\n\r\n    var g = that.canvas.getContext(\"2d\");\r\n    g.lineWidth = that.PARTICLE_LINE_WIDTH;\r\n    g.fillStyle = fadeFillStyle;\r\n    g.globalAlpha = 0.6;\r\n\r\n    function draw() {\r\n      // Fade existing particle trails.\r\n      var prev = \"lighter\";\r\n      g.globalCompositeOperation = \"destination-in\";\r\n      g.fillRect(bounds.x, bounds.y, bounds.width, bounds.height);\r\n      g.globalCompositeOperation = prev;\r\n      g.globalAlpha = 0.9;\r\n\r\n      // Draw new particle trails.\r\n      buckets.forEach(function (bucket, i) {\r\n        if (bucket.length > 0) {\r\n          g.beginPath();\r\n          g.strokeStyle = colorStyles[i];\r\n          bucket.forEach(function (particle) {\r\n            g.moveTo(particle.x, particle.y);\r\n            g.lineTo(particle.xt, particle.yt);\r\n            particle.x = particle.xt;\r\n            particle.y = particle.yt;\r\n          });\r\n          g.stroke();\r\n        }\r\n      });\r\n    }\r\n\r\n    var then = Date.now();\r\n    (function frame() {\r\n      animationLoop = requestAnimationFrame(frame);\r\n      var now = Date.now();\r\n      var delta = now - then;\r\n      if (delta > FRAME_TIME) {\r\n        then = now - (delta % FRAME_TIME);\r\n        evolve();\r\n        draw();\r\n        params.onDraw && params.onDraw();\r\n      }\r\n    })();\r\n  };\r\n\r\n  var updateData = function (data, bounds, width, height, extent) {\r\n    delete that.params.data;\r\n    that.params.data = data;\r\n    if (extent)\r\n      start(bounds, width, height, extent);\r\n  };\r\n\r\n  var start = function (bounds, width, height, extent) {\r\n    var mapBounds = {\r\n      south: deg2rad(extent[0][1]),\r\n      north: deg2rad(extent[1][1]),\r\n      east: deg2rad(extent[1][0]),\r\n      west: deg2rad(extent[0][0]),\r\n      width: width,\r\n      height: height\r\n    };\r\n\r\n    stop();\r\n\r\n    // build grid\r\n    buildGrid(gridData, function (grid) {\r\n      // interpolateField\r\n      interpolateField(grid, buildBounds(bounds, width, height), mapBounds, function (bounds, field) {\r\n        // animate the canvas with random points\r\n        windy.field = field;\r\n        animate(bounds, field);\r\n      });\r\n\r\n    });\r\n  };\r\n\r\n  var stop = function () {\r\n    if (windy.field) windy.field.release();\r\n    if (animationLoop) cancelAnimationFrame(animationLoop);\r\n  };\r\n\r\n  var shift = function (dx, dy) {\r\n    var canvas = that.canvas, w = canvas.width, h = canvas.height, ctx = canvas.getContext(\"2d\");\r\n    if (w > dx && h > dy) {\r\n      var clamp = function (high, value) {\r\n        return Math.max(0, Math.min(high, value));\r\n      };\r\n      var imageData = ctx.getImageData(clamp(w, -dx), clamp(h, -dy), clamp(w, w - dx), clamp(h, h - dy));\r\n      ctx.clearRect(0, 0, w, h);\r\n      ctx.putImageData(imageData, clamp(w, dx), clamp(h, dy));\r\n      for (var i = 0, pLength = particles.length; i < pLength; i++) {\r\n        particles[i].x += dx;\r\n        particles[i].y += dy;\r\n      }\r\n    }\r\n  };\r\n\r\n  var updateParams = function (params) {\r\n    that.params = params;\r\n    buildParams(that.params);\r\n  };\r\n\r\n  var getParams = function () {\r\n    return that.params;\r\n  };\r\n\r\n  var windy = {\r\n    params: that.params,\r\n    start: start,\r\n    stop: stop,\r\n    update: updateData,\r\n    shift: shift,\r\n    createField: createField,\r\n    interpolatePoint: interpolate,\r\n    setData: setData,\r\n    updateParams: updateParams,\r\n    getParams: getParams,\r\n    buildParams: buildParams,\r\n  };\r\n\r\n  return windy;\r\n};\r\n\r\n// polyfill\r\nwindow.requestAnimationFrame = (function () {\r\n  return window.requestAnimationFrame ||\r\n    window.webkitRequestAnimationFrame ||\r\n    window.mozRequestAnimationFrame ||\r\n    window.oRequestAnimationFrame ||\r\n    window.msRequestAnimationFrame ||\r\n    function (callback) {\r\n      return window.setTimeout(callback, 1000 / window.FRAME_RATE);\r\n    };\r\n})();\r\n\r\nif (!window.cancelAnimationFrame) {\r\n  window.cancelAnimationFrame = function (id) {\r\n    clearTimeout(id);\r\n  };\r\n}\r\n\r\nexport default Windy\r\n","/**\r\n * create canvas\r\n * @param width\r\n * @param height\r\n * @param Canvas\r\n * @returns {HTMLCanvasElement}\r\n */\r\nconst createCanvas = (width, height, Canvas) => {\r\n  if (typeof document !== 'undefined') {\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = width\r\n    canvas.height = height\r\n    return canvas\r\n  } else {\r\n    // create a new canvas instance in node.js\r\n    // the canvas class needs to have a default constructor without any parameter\r\n    return new Canvas(width, height)\r\n  }\r\n}\r\n\r\nconst getDirection = (uMs, vMs, angleConvention) => {\r\n  // Default angle convention is CW\r\n  if (angleConvention.endsWith('CCW')) {\r\n    // vMs comes out upside-down..\r\n    vMs = vMs > 0 ? vMs = -vMs : Math.abs(vMs)\r\n  }\r\n  const velocityAbs = Math.sqrt(Math.pow(uMs, 2) + Math.pow(vMs, 2))\r\n  const velocityDir = Math.atan2(uMs / velocityAbs, vMs / velocityAbs)\r\n  let velocityDirToDegrees = velocityDir * 180 / Math.PI + 180\r\n  if (angleConvention === 'bearingCW' || angleConvention === 'meteoCCW') {\r\n    velocityDirToDegrees += 180\r\n    if (velocityDirToDegrees >= 360) { velocityDirToDegrees -= 360 }\r\n  }\r\n  return velocityDirToDegrees\r\n}\r\n\r\nconst meterSec2kilometerHour = (meters) => {\r\n  return meters * 3.6\r\n}\r\n\r\nconst meterSec2Knots = (meters) => {\r\n  return meters / 0.514\r\n}\r\n\r\nconst getSpeed = (uMs, vMs, unit) => {\r\n  const velocityAbs = Math.sqrt(Math.pow(uMs, 2) + Math.pow(vMs, 2))\r\n  // Default is m/s\r\n  if (unit === 'k/h') {\r\n    return meterSec2kilometerHour(velocityAbs)\r\n  } else if (unit === 'kt') {\r\n    return meterSec2Knots(velocityAbs)\r\n  } else {\r\n    return velocityAbs\r\n  }\r\n}\r\n\r\nconst getExtent = (coords) => {\r\n  const extent = [\r\n    Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY,\r\n    Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY\r\n  ]\r\n  return coords.reduce((prev, coord) => {\r\n    return [\r\n      Math.min(coord[0], prev[0]),\r\n      Math.min(coord[1], prev[1]),\r\n      Math.max(coord[0], prev[2]),\r\n      Math.max(coord[1], prev[3])\r\n    ]\r\n  }, extent)\r\n}\r\n\r\nexport {\r\n  getExtent,\r\n  getSpeed,\r\n  createCanvas,\r\n  getDirection\r\n}\r\n","/**\n * @module ol/layer/Image\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {import(\"../source/Image.js\").default} [source] Source for this layer.\n */\n\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n * @api\n */\nvar ImageLayer = /*@__PURE__*/(function (Layer) {\n  function ImageLayer(opt_options) {\n    var options = opt_options ? opt_options : {};\n    Layer.call(this, options);\n\n    /**\n     * The layer type.\n     * @protected\n     * @type {import(\"../LayerType.js\").default}\n     */\n    this.type = LayerType.IMAGE;\n\n  }\n\n  if ( Layer ) ImageLayer.__proto__ = Layer;\n  ImageLayer.prototype = Object.create( Layer && Layer.prototype );\n  ImageLayer.prototype.constructor = ImageLayer;\n\n  return ImageLayer;\n}(Layer));\n\n\n/**\n * Return the associated {@link module:ol/source/Image source} of the image layer.\n * @function\n * @return {import(\"../source/Image.js\").default} Source.\n * @api\n */\nImageLayer.prototype.getSource;\nexport default ImageLayer;\n\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/reproj/Image\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport ImageBase from '../ImageBase.js';\nimport ImageState from '../ImageState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getCenter, getIntersection, getHeight, getWidth} from '../extent.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from './Triangulation.js';\n\n\n/**\n * @typedef {function(import(\"../extent.js\").Extent, number, number) : import(\"../ImageBase.js\").default} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected image.\n * See {@link module:ol/source/Image~ImageSource}.\n */\nvar ReprojImage = /*@__PURE__*/(function (ImageBase) {\n  function ReprojImage(sourceProj, targetProj, targetExtent, targetResolution, pixelRatio, getImageFunction) {\n    var maxSourceExtent = sourceProj.getExtent();\n    var maxTargetExtent = targetProj.getExtent();\n\n    var limitedTargetExtent = maxTargetExtent ?\n      getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n    var targetCenter = getCenter(limitedTargetExtent);\n    var sourceResolution = calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n    var errorThresholdInPixels = ERROR_THRESHOLD;\n\n    var triangulation = new Triangulation(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n    var sourceExtent = triangulation.calculateSourceExtent();\n    var sourceImage = getImageFunction(sourceExtent, sourceResolution, pixelRatio);\n    var state = ImageState.LOADED;\n    if (sourceImage) {\n      state = ImageState.IDLE;\n    }\n    var sourcePixelRatio = sourceImage ? sourceImage.getPixelRatio() : 1;\n\n    ImageBase.call(this, targetExtent, targetResolution, sourcePixelRatio, state);\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.targetProj_ = targetProj;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @private\n     * @type {!import(\"./Triangulation.js\").default}\n     */\n    this.triangulation_ = triangulation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.targetResolution_ = targetResolution;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.targetExtent_ = targetExtent;\n\n    /**\n     * @private\n     * @type {import(\"../ImageBase.js\").default}\n     */\n    this.sourceImage_ = sourceImage;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourcePixelRatio_ = sourcePixelRatio;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceListenerKey_ = null;\n  }\n\n  if ( ImageBase ) ReprojImage.__proto__ = ImageBase;\n  ReprojImage.prototype = Object.create( ImageBase && ImageBase.prototype );\n  ReprojImage.prototype.constructor = ReprojImage;\n\n  /**\n   * @inheritDoc\n   */\n  ReprojImage.prototype.disposeInternal = function disposeInternal () {\n    if (this.state == ImageState.LOADING) {\n      this.unlistenSource_();\n    }\n    ImageBase.prototype.disposeInternal.call(this);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  ReprojImage.prototype.getImage = function getImage () {\n    return this.canvas_;\n  };\n\n  /**\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  ReprojImage.prototype.getProjection = function getProjection () {\n    return this.targetProj_;\n  };\n\n  /**\n   * @private\n   */\n  ReprojImage.prototype.reproject_ = function reproject_ () {\n    var sourceState = this.sourceImage_.getState();\n    if (sourceState == ImageState.LOADED) {\n      var width = getWidth(this.targetExtent_) / this.targetResolution_;\n      var height = getHeight(this.targetExtent_) / this.targetResolution_;\n\n      this.canvas_ = renderReprojected(width, height, this.sourcePixelRatio_,\n        this.sourceImage_.getResolution(), this.maxSourceExtent_,\n        this.targetResolution_, this.targetExtent_, this.triangulation_, [{\n          extent: this.sourceImage_.getExtent(),\n          image: this.sourceImage_.getImage()\n        }], 0);\n    }\n    this.state = sourceState;\n    this.changed();\n  };\n\n  /**\n   * @inheritDoc\n   */\n  ReprojImage.prototype.load = function load () {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n\n      var sourceState = this.sourceImage_.getState();\n      if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n        this.reproject_();\n      } else {\n        this.sourceListenerKey_ = listen(this.sourceImage_,\n          EventType.CHANGE, function(e) {\n            var sourceState = this.sourceImage_.getState();\n            if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n              this.unlistenSource_();\n              this.reproject_();\n            }\n          }, this);\n        this.sourceImage_.load();\n      }\n    }\n  };\n\n  /**\n   * @private\n   */\n  ReprojImage.prototype.unlistenSource_ = function unlistenSource_ () {\n    unlistenByKey(/** @type {!import(\"../events.js\").EventsKey} */ (this.sourceListenerKey_));\n    this.sourceListenerKey_ = null;\n  };\n\n  return ReprojImage;\n}(ImageBase));\n\n\nexport default ReprojImage;\n\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/source/Image\n */\nimport {abstract} from '../util.js';\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport ImageState from '../ImageState.js';\nimport {linearFindNearest} from '../array.js';\nimport Event from '../events/Event.js';\nimport {equals} from '../extent.js';\nimport {equivalent} from '../proj.js';\nimport ReprojImage from '../reproj/Image.js';\nimport Source from './Source.js';\n\n\n/**\n * @enum {string}\n */\nvar ImageSourceEventType = {\n\n  /**\n   * Triggered when an image starts loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadstart\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n\n  /**\n   * Triggered when an image finishes loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadend\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n\n  /**\n   * Triggered if image loading results in an error.\n   * @event ol/source/Image~ImageSourceEvent#imageloaderror\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Image~ImageSource} instances are instances of this\n * type.\n */\nvar ImageSourceEvent = /*@__PURE__*/(function (Event) {\n  function ImageSourceEvent(type, image) {\n\n    Event.call(this, type);\n\n    /**\n     * The image related to the event.\n     * @type {import(\"../Image.js\").default}\n     * @api\n     */\n    this.image = image;\n\n  }\n\n  if ( Event ) ImageSourceEvent.__proto__ = Event;\n  ImageSourceEvent.prototype = Object.create( Event && Event.prototype );\n  ImageSourceEvent.prototype.constructor = ImageSourceEvent;\n\n  return ImageSourceEvent;\n}(Event));\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {import(\"../proj.js\").ProjectionLike} projection\n * @property {Array<number>} [resolutions]\n * @property {import(\"./State.js\").default} [state]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing a single image.\n * @abstract\n * @api\n */\nvar ImageSource = /*@__PURE__*/(function (Source) {\n  function ImageSource(options) {\n    Source.call(this, {\n      attributions: options.attributions,\n      projection: options.projection,\n      state: options.state\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.resolutions_ = options.resolutions !== undefined ?\n      options.resolutions : null;\n\n\n    /**\n     * @private\n     * @type {import(\"../reproj/Image.js\").default}\n     */\n    this.reprojectedImage_ = null;\n\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.reprojectedRevision_ = 0;\n  }\n\n  if ( Source ) ImageSource.__proto__ = Source;\n  ImageSource.prototype = Object.create( Source && Source.prototype );\n  ImageSource.prototype.constructor = ImageSource;\n\n  /**\n   * @return {Array<number>} Resolutions.\n   * @override\n   */\n  ImageSource.prototype.getResolutions = function getResolutions () {\n    return this.resolutions_;\n  };\n\n  /**\n   * @protected\n   * @param {number} resolution Resolution.\n   * @return {number} Resolution.\n   */\n  ImageSource.prototype.findNearestResolution = function findNearestResolution (resolution) {\n    if (this.resolutions_) {\n      var idx = linearFindNearest(this.resolutions_, resolution, 0);\n      resolution = this.resolutions_[idx];\n    }\n    return resolution;\n  };\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   */\n  ImageSource.prototype.getImage = function getImage (extent, resolution, pixelRatio, projection) {\n    var sourceProjection = this.getProjection();\n    if (!ENABLE_RASTER_REPROJECTION ||\n        !sourceProjection ||\n        !projection ||\n        equivalent(sourceProjection, projection)) {\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n      return this.getImageInternal(extent, resolution, pixelRatio, projection);\n    } else {\n      if (this.reprojectedImage_) {\n        if (this.reprojectedRevision_ == this.getRevision() &&\n            equivalent(\n              this.reprojectedImage_.getProjection(), projection) &&\n            this.reprojectedImage_.getResolution() == resolution &&\n            equals(this.reprojectedImage_.getExtent(), extent)) {\n          return this.reprojectedImage_;\n        }\n        this.reprojectedImage_.dispose();\n        this.reprojectedImage_ = null;\n      }\n\n      this.reprojectedImage_ = new ReprojImage(\n        sourceProjection, projection, extent, resolution, pixelRatio,\n        function(extent, resolution, pixelRatio) {\n          return this.getImageInternal(extent, resolution,\n            pixelRatio, sourceProjection);\n        }.bind(this));\n      this.reprojectedRevision_ = this.getRevision();\n\n      return this.reprojectedImage_;\n    }\n  };\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   * @protected\n   */\n  ImageSource.prototype.getImageInternal = function getImageInternal (extent, resolution, pixelRatio, projection) {\n    return abstract();\n  };\n\n  /**\n   * Handle image change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   * @protected\n   */\n  ImageSource.prototype.handleImageChange = function handleImageChange (event) {\n    var image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    switch (image.getState()) {\n      case ImageState.LOADING:\n        this.loading = true;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADSTART,\n            image));\n        break;\n      case ImageState.LOADED:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADEND,\n            image));\n        break;\n      case ImageState.ERROR:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADERROR,\n            image));\n        break;\n      default:\n        // pass\n    }\n  };\n\n  return ImageSource;\n}(Source));\n\n\n/**\n * Default image load function for image sources that use import(\"../Image.js\").Image image\n * instances.\n * @param {import(\"../Image.js\").default} image Image.\n * @param {string} src Source.\n */\nexport function defaultImageLoadFunction(image, src) {\n  /** @type {HTMLImageElement|HTMLVideoElement} */ (image.getImage()).src = src;\n}\n\n\nexport default ImageSource;\n\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/source/ImageCanvas\n */\n\nimport ImageCanvas from '../ImageCanvas.js';\nimport {containsExtent, getHeight, getWidth, scaleFromCenter} from '../extent.js';\nimport ImageSource from './Image.js';\n\n\n/**\n * A function returning the canvas element (`{HTMLCanvasElement}`)\n * used by the source as an image. The arguments passed to the function are:\n * {@link module:ol/extent~Extent} the image extent, `{number}` the image resolution,\n * `{number}` the device pixel ratio, {@link module:ol/size~Size} the image size, and\n * {@link module:ol/proj/Projection} the image projection. The canvas returned by\n * this function is cached by the source. The this keyword inside the function\n * references the {@link module:ol/source/ImageCanvas}.\n *\n * @typedef {function(this:import(\"../ImageCanvas.js\").default, import(\"../extent.js\").Extent, number,\n *     number, import(\"../size.js\").Size, import(\"../proj/Projection.js\").default): HTMLCanvasElement} FunctionType\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {FunctionType} [canvasFunction] Canvas function.\n * The function returning the canvas element used by the source\n * as an image. The arguments passed to the function are: `{import(\"../extent.js\").Extent}` the\n * image extent, `{number}` the image resolution, `{number}` the device pixel\n * ratio, `{import(\"../size.js\").Size}` the image size, and `{import(\"../proj/Projection.js\").Projection}` the image\n * projection. The canvas returned by this function is cached by the source. If\n * the value returned by the function is later changed then\n * `changed` should be called on the source for the source to\n * invalidate the current cached image. See: {@link module:ol/Observable~Observable#changed}\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {number} [ratio=1.5] Ratio. 1 means canvases are the size of the map viewport, 2 means twice the\n * width and height of the map viewport, and so on. Must be `1` or higher.\n * @property {Array<number>} [resolutions] Resolutions.\n * If specified, new canvases will be created for these resolutions\n * @property {import(\"./State.js\").default} [state] Source state.\n */\n\n\n/**\n * @classdesc\n * Base class for image sources where a canvas element is the image.\n * @api\n */\nvar ImageCanvasSource = /*@__PURE__*/(function (ImageSource) {\n  function ImageCanvasSource(opt_options) {\n\n    var options = opt_options || /** @type {Options} */ ({});\n\n    ImageSource.call(this, {\n      attributions: options.attributions,\n      projection: options.projection,\n      resolutions: options.resolutions,\n      state: options.state\n    });\n\n    /**\n    * @private\n    * @type {FunctionType}\n    */\n    this.canvasFunction_ = options.canvasFunction;\n\n    /**\n    * @private\n    * @type {import(\"../ImageCanvas.js\").default}\n    */\n    this.canvas_ = null;\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.renderedRevision_ = 0;\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.ratio_ = options.ratio !== undefined ?\n      options.ratio : 1.5;\n\n  }\n\n  if ( ImageSource ) ImageCanvasSource.__proto__ = ImageSource;\n  ImageCanvasSource.prototype = Object.create( ImageSource && ImageSource.prototype );\n  ImageCanvasSource.prototype.constructor = ImageCanvasSource;\n\n  /**\n  * @inheritDoc\n  */\n  ImageCanvasSource.prototype.getImageInternal = function getImageInternal (extent, resolution, pixelRatio, projection) {\n    resolution = this.findNearestResolution(resolution);\n\n    var canvas = this.canvas_;\n    if (canvas &&\n       this.renderedRevision_ == this.getRevision() &&\n       canvas.getResolution() == resolution &&\n       canvas.getPixelRatio() == pixelRatio &&\n       containsExtent(canvas.getExtent(), extent)) {\n      return canvas;\n    }\n\n    extent = extent.slice();\n    scaleFromCenter(extent, this.ratio_);\n    var width = getWidth(extent) / resolution;\n    var height = getHeight(extent) / resolution;\n    var size = [width * pixelRatio, height * pixelRatio];\n\n    var canvasElement = this.canvasFunction_.call(\n      this, extent, resolution, pixelRatio, size, projection);\n    if (canvasElement) {\n      canvas = new ImageCanvas(extent, resolution, pixelRatio, canvasElement);\n    }\n    this.canvas_ = canvas;\n    this.renderedRevision_ = this.getRevision();\n\n    return canvas;\n  };\n\n  return ImageCanvasSource;\n}(ImageSource));\n\n\nexport default ImageCanvasSource;\n\n//# sourceMappingURL=ImageCanvas.js.map","import Windy from './windy'\r\nimport { createCanvas, getDirection, getSpeed } from './helper'\r\nimport { Image } from 'ol/layer'\r\nimport { ImageCanvas } from 'ol/source'\r\nimport { transformExtent } from 'ol/proj'\r\nimport Map from 'ol/Map'\r\nclass OlWind extends Image {\r\n  constructor(data, options = {}) {\r\n    super(options)\r\n\r\n    /**\r\n     * 矢量图层\r\n     * @type {null}\r\n     */\r\n    this._canvas = null\r\n\r\n    /**\r\n     * windy 数据\r\n     */\r\n    this.data = data\r\n\r\n    /**\r\n     * windy layer\r\n     * @type {null}\r\n     */\r\n    this.$Windy = null\r\n\r\n    /**\r\n     * is clear\r\n     * @type {boolean}\r\n     */\r\n    this.isClear = false\r\n\r\n    /**\r\n     * options\r\n     * @type {{}}\r\n     */\r\n    this.options = options\r\n    this.setSource(new ImageCanvas({\r\n      logo: options.logo,\r\n      state: options.state,\r\n      attributions: options.attributions,\r\n      resolutions: options.resolutions,\r\n      canvasFunction: this.canvasFunction.bind(this),\r\n      projection: (options.hasOwnProperty('projection') ? options.projection : 'EPSG:4326'),\r\n      ratio: (options.hasOwnProperty('ratio') ? options.ratio : 1)\r\n    }))\r\n    this.on('precompose', this.redraw, this)\r\n  }\r\n\r\n  /**\r\n   * get layer data\r\n   * @returns {*}\r\n   */\r\n  getData() {\r\n    return this.data\r\n  }\r\n\r\n  /**\r\n   * set layer data\r\n   * @param data\r\n   * @returns {OlWind}\r\n   */\r\n  setData(data) {\r\n    const _map = this.getMap()\r\n    if (!_map) { return this }\r\n    this.data = data\r\n    this.isClear = false\r\n    if (!this.$Windy && this._canvas) {\r\n      this.render(this._canvas)\r\n      _map.renderSync()\r\n    } else if (this.$Windy && this._canvas) {\r\n      if (this._cloneLayer) {\r\n        _map.addLayer(this._cloneLayer)\r\n        delete this._cloneLayer\r\n      }\r\n      const extent = this._getExtent()\r\n      this.$Windy.update(this.getData(), extent[0], extent[1], extent[2], extent[3])\r\n    } else {\r\n      console.warn('please create new instance')\r\n    }\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * render windy layer\r\n   * @returns {OlWind}\r\n   */\r\n  render(canvas) {\r\n    const extent = this._getExtent()\r\n    if (this.isClear || !this.getData() || !extent) { return this }\r\n    if (canvas && !this.$Windy) {\r\n      const {\r\n        minVelocity,\r\n        maxVelocity,\r\n        velocityScale,\r\n        particleAge,\r\n        lineWidth,\r\n        particleMultiplier,\r\n        colorScale\r\n      } = this.options\r\n      this.$Windy = new Windy({\r\n        canvas: canvas,\r\n        projection: this._getProjectionCode(),\r\n        data: this.getData(),\r\n        minVelocity,\r\n        maxVelocity,\r\n        velocityScale,\r\n        particleAge,\r\n        lineWidth,\r\n        particleMultiplier,\r\n        colorScale\r\n      })\r\n      this.$Windy.start(extent[0], extent[1], extent[2], extent[3])\r\n    } else if (canvas && this.$Windy) {\r\n      const extent = this._getExtent()\r\n      this.$Windy.start(extent[0], extent[1], extent[2], extent[3])\r\n    }\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * re-draw\r\n   */\r\n  redraw() {\r\n    if (this.isClear) { return }\r\n    const _extent = this.options.extent || this._getMapExtent()\r\n    this.setExtent(_extent)\r\n  }\r\n\r\n  /**\r\n   * canvas constructor\r\n   * @param extent\r\n   * @param resolution\r\n   * @param pixelRatio\r\n   * @param size\r\n   * @param projection\r\n   * @returns {*}\r\n   */\r\n  canvasFunction(extent, resolution, pixelRatio, size, projection) {\r\n    if (!this._canvas) {\r\n      this._canvas = createCanvas(size[0], size[1])\r\n    } else {\r\n      this._canvas.width = size[0]\r\n      this._canvas.height = size[1]\r\n    }\r\n    if (resolution <= this.get('maxResolution')) {\r\n      this.render(this._canvas)\r\n    } else {\r\n      // console.warn('超出所设置最大分辨率！')\r\n    }\r\n    return this._canvas\r\n  }\r\n\r\n  /**\r\n   * bounds, width, height, extent\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  _getExtent() {\r\n    const size = this._getMapSize()\r\n    const _extent = this._getMapExtent()\r\n    if (size && _extent) {\r\n      const _projection = this._getProjectionCode()\r\n      const extent = new transformExtent(_extent, _projection, 'EPSG:4326')\r\n      return [[[0, 0], [size[0], size[1]]], size[0], size[1], [[extent[0], extent[1]], [extent[2], extent[3]]]]\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get map current extent\r\n   * @returns {ol.View|*|Array<number>}\r\n   * @private\r\n   */\r\n  _getMapExtent() {\r\n    if (!this.getMap()) { return }\r\n    const size = this._getMapSize()\r\n    const _view = this.getMap().getView()\r\n    return _view && _view.calculateExtent(size)\r\n  }\r\n\r\n  /**\r\n   * get size\r\n   * @returns {ol.Size|*}\r\n   * @private\r\n   */\r\n  _getMapSize() {\r\n    if (!this.getMap()) { return }\r\n    return this.getMap().getSize()\r\n  }\r\n\r\n  /**\r\n   * append layer to map\r\n   * @param map\r\n   */\r\n  appendTo(map) {\r\n    if (map && map instanceof Map) {\r\n      this.set('originMap', map)\r\n      // this.getSource().projection_ = this._getProjectionCode()\r\n      map.addLayer(this)\r\n    } else {\r\n      throw new Error('not map object')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get mouse point data\r\n   * @param coordinates\r\n   * @returns {null|{speed: (*|number), direction}}\r\n   */\r\n  getPointData(coordinates) {\r\n    if (!this.$Windy) { return null }\r\n    const gridValue = this.$Windy.interpolatePoint(coordinates[0], coordinates[1])\r\n    if (gridValue && !isNaN(gridValue[0]) && !isNaN(gridValue[1]) && gridValue[2]) {\r\n      return {\r\n        direction: getDirection(gridValue[0], gridValue[1], this.options.angleConvention || 'bearingCCW'),\r\n        speed: getSpeed(gridValue[0], gridValue[1], this.options.speedUnit)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * clearWind method will retain the instance\r\n   * @private\r\n   */\r\n  clearWind() {\r\n    const _map = this.getMap()\r\n    if (!_map) { return }\r\n    if (this.$Windy) { this.$Windy.stop() }\r\n    this.isClear = true\r\n    this._cloneLayer = this\r\n    _map.removeLayer(this)\r\n    this.changed()\r\n    this.getMap().renderSync()\r\n  }\r\n\r\n  /**\r\n   * remove layer this instance will be destroyed after remove\r\n   */\r\n  removeLayer() {\r\n    const _map = this.getMap()\r\n    if (!_map) { return }\r\n    if (this.$Windy) { this.$Windy.stop() }\r\n    this.un('precompose', this.redraw, this)\r\n    _map.removeLayer(this)\r\n    delete this._canvas\r\n    delete this.$Windy\r\n    delete this._cloneLayer\r\n  }\r\n\r\n  /**\r\n   * set map\r\n   * @param map\r\n   */\r\n  setMap(map) {\r\n    this.set('originMap', map)\r\n    // ol.layer.Image.prototype.setMap.call(this, map)\r\n  }\r\n\r\n  /**\r\n   * get map\r\n   */\r\n  getMap() {\r\n    return this.get('originMap')\r\n  }\r\n\r\n  _getProjectionCode() {\r\n    let code = ''\r\n    const map = this.getMap()\r\n    if (map) {\r\n      code =\r\n        map.getView() &&\r\n        map\r\n          .getView()\r\n          .getProjection()\r\n          .getCode()\r\n    } else {\r\n      code = 'EPSG:4326'\r\n    }\r\n    return code\r\n  }\r\n\r\n  /**\r\n   * update windy config\r\n   * @param params\r\n   * @returns {OlWind}\r\n   */\r\n  updateParams(params) {\r\n    this.options = Object.assign(this.options, params)\r\n    if (this.$Windy) {\r\n      const {\r\n        minVelocity, // 粒子强度最小的速度 (m/s)\r\n        maxVelocity, // 粒子强度最大的速度 (m/s)\r\n        velocityScale, // 风速的比例\r\n        particleAge, // 重绘之前生成的离子数量的最大帧数\r\n        lineWidth, // 绘制粒子的线宽\r\n        particleMultiplier, // 离子数量\r\n        colorScale\r\n      } = this.options\r\n      if (this.$Windy) {\r\n        this.$Windy.updateParams({\r\n          minVelocity,\r\n          maxVelocity,\r\n          velocityScale,\r\n          particleAge,\r\n          lineWidth,\r\n          particleMultiplier,\r\n          colorScale\r\n        })\r\n        if (this.getMap() && this._canvas && this.data) {\r\n          this.render(this._canvas)\r\n        }\r\n      }\r\n    }\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * get windy config\r\n   * @returns {null|*|Windy.params|{velocityScale, minVelocity, maxVelocity, colorScale, particleAge, lineWidth, particleMultiplier}}\r\n   */\r\n  getParams() {\r\n    return this.$Windy && this.$Windy.getParams()\r\n  }\r\n}\r\n\r\nexport default OlWind\r\n","<template>\r\n  <div id=\"olmap\"></div>\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css';\r\nimport Map from 'ol/Map.js';\r\nimport View from 'ol/View.js';\r\nimport TileLayer from 'ol/layer/Tile.js';\r\nimport XYZ from 'ol/source/XYZ'\r\nimport Projection from 'ol/proj/Projection';\r\n// import OlWind from 'wind-layer/dist/OlWindy';\r\nimport OlWind from '../lib/wind-layer';\r\n\r\nexport default {\r\n  name: 'wind-layer',\r\n  components: {},\r\n  mounted() {\r\n    this.mapInit();\r\n  },\r\n  methods: {\r\n    mapInit() {\r\n      const layers = new TileLayer({\r\n        title: '午夜蓝图',\r\n        source: new XYZ({\r\n          url: 'http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}'\r\n        })\r\n      });\r\n\r\n      const map = new Map({\r\n        layers: [layers],\r\n        target: 'olmap',\r\n        view: new View({\r\n          center: [108.62957031250004, 36.510877929687524],\r\n          projection: 'EPSG:4326',\r\n          zoom: 5\r\n        })\r\n      });\r\n      map.on('click', (evt) => {\r\n        console.log(evt)\r\n      })\r\n      fetch('/data/gfs.json').then(response => {\r\n        response.json().then(res => {\r\n          const data = res['2019110814'];\r\n          console.log(data);\r\n          this.windLayerInit(map, data);\r\n        });\r\n      });\r\n    },\r\n\r\n    windLayerInit(map, data) {\r\n      const wind = new OlWind(data, {\r\n        layerName: 'data',\r\n        projection: 'EPSG:4326',\r\n        // projection: new Projection({ code: 'EPSG:4326',units:'degrees',worldExtent:[-180, -90, 180, 90],metersPerUnit:111319.49079327358 }),\r\n        ratio: 1,\r\n        map: map,\r\n        colorScale: [\r\n          // 'rgb(36,104, 180)',\r\n          // 'rgb(60,157, 194)',\r\n          // 'rgb(128,205,193 )',\r\n          // 'rgb(151,218,168 )',\r\n          // 'rgb(198,231,181)',\r\n          // 'rgb(238,247,217)',\r\n          // 'rgb(255,238,159)',\r\n          'rgb(252,217,125)',\r\n          'rgb(255,182,100)',\r\n          'rgb(252,150,75)',\r\n          'rgb(250,112,52)',\r\n          'rgb(245,64,32)',\r\n          'rgb(237,45,28)',\r\n          'rgb(220,24,32)',\r\n          'rgb(180,0,35)'\r\n        ],\r\n        minVelocity: 0,\r\n        maxVelocity: 10,\r\n        velocityScale: 0.005,\r\n        particleAge: 90,\r\n        lineWidth: 1,\r\n        particleMultiplier: 0.008\r\n      });\r\n\r\n      wind.appendTo(map);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n#olmap {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wind-layer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wind-layer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wind-layer.vue?vue&type=template&id=be90ecf2&\"\nimport script from \"./wind-layer.vue?vue&type=script&lang=js&\"\nexport * from \"./wind-layer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wind-layer.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}